<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BM ANIMALS | Stellar Deep AI</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        :root {
            --primary-green: #39FF14;
            --dark-bg: #0a0a0a;
            --card-bg: #161616;
            --text-gray: #a0a0a0;
        }
        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0;
            padding-bottom: 90px;
            overflow-x: hidden;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .spinner { width: 40px; height: 40px; border: 4px solid #222; border-top-color: var(--primary-green); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 20px; background: rgba(17, 17, 17, 0.9);
            backdrop-filter: blur(10px); border-bottom: 1px solid #222;
            position: sticky; top: 0; z-index: 100;
        }
        .logo-text { color: var(--primary-green); font-weight: bold; font-size: 1.2rem; text-shadow: 0 0 10px rgba(57, 255, 20, 0.5); }

        /* Ø§Ù„ÙƒØ±ÙˆØª */
        .hero-card {
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border-radius: 25px; padding: 25px; margin: 15px;
            border: 1px solid #333; text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .service-card {
            background: var(--card-bg); border-radius: 20px; padding: 20px;
            margin: 15px; display: flex; align-items: center; gap: 15px;
            border: 1px solid #222; transition: 0.3s;
        }
        .icon-box { width: 50px; height: 50px; background: #222; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; color: var(--primary-green); }

        /* Ù‚Ø³Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ */
        .ai-box {
            background: #111; border-radius: 20px; padding: 20px; margin: 15px;
            border: 1px solid var(--primary-green);
        }
        .ai-input {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #333;
            background: #000; color: white; margin-bottom: 10px; box-sizing: border-box;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: #111;
            display: flex; justify-content: space-around; padding: 12px 0;
            border-top: 1px solid #222; z-index: 999;
        }
        .nav-item { color: var(--text-gray); font-size: 0.75rem; text-align: center; cursor: pointer; }
        .nav-item.active { color: var(--primary-green); }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn-main { 
            background: var(--primary-green); color: black; border: none; 
            padding: 12px 20px; border-radius: 12px; font-weight: bold; 
            width: 100%; cursor: pointer; transition: 0.3s;
        }
        .btn-main:active { transform: scale(0.98); }
        
        #ai-response { margin-top: 15px; font-size: 0.9rem; color: #ddd; line-height: 1.4; }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <p style="color: var(--primary-green); margin-top: 15px;">Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Stellar AI...</p>
    </div>

    <div id="external-msg" style="display:none; padding: 50px 20px; text-align: center;">
        <h1 style="color:var(--primary-green)">ğŸ¾ BM ANIMALS</h1>
        <p>Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø®ØµØµ Ù„Ù…Ø¬ØªÙ…Ø¹ Pi Network.</p>
        <p>ÙŠØ±Ø¬Ù‰ ÙØªØ­Ù‡ Ù…Ù† Ø¯Ø§Ø®Ù„ <b>Pi Browser</b> Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Stellar ÙˆØ¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª.</p>
        <a href="https://play.google.com/store/apps/details?id=it.pinetwork.viewer" style="background:var(--primary-green); color:black; padding:15px 30px; border-radius:50px; text-decoration:none; display:inline-block; margin-top:20px; font-weight:bold;">ØªØ­Ù…ÙŠÙ„ Pi Browser</a>
    </div>

    <div id="app-ui" style="display:none">
        <div class="header">
            <div class="logo-text">ğŸ¾ BM ANIMALS</div>
            <div id="user-display" style="font-size: 0.8rem; color: var(--text-gray);">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø±Ø§Ø¦Ø¯!</div>
        </div>

        <div class="hero-card">
            <h2>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¦ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h2>
            <p>Ø±Ø¹Ø§ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ø¨Ø°ÙƒØ§Ø¡ Stellar</p>
            <div style="font-size:0.75rem; border:1px dashed #444; padding:5px; margin-top:10px; color: var(--primary-green);">Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: 3.14%</div>
        </div>

        <div class="ai-box">
            <h3>ğŸ’¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ù…ÙŠ Stellar</h3>
            <input type="text" id="ai-input" class="ai-input" placeholder="Ø§ÙƒØªØ¨ Ø­Ø§Ù„Ø© Ø­ÙŠÙˆØ§Ù†Ùƒ Ù‡Ù†Ø§...">
            <button class="btn-main" onclick="askStellar()">Ø§Ø³ØªØ´Ø§Ø±Ø© Ø°ÙƒÙŠØ© (3.14 Ï€)</button>
            <div id="ai-response">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ StellarØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
        </div>

        <div class="service-card" onclick="alert('Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ BM Tracker...')">
            <div class="icon-box">ğŸ“</div>
            <div><h3>BM Tracker</h3><p>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ù‚Ø±Ø¨ Ø¹ÙŠØ§Ø¯Ø© Ø¨ÙŠØ·Ø±ÙŠØ©</p></div>
        </div>

        <div class="service-card" onclick="alert('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„Ù…Ø®ØªØ¨Ø±...')">
            <div class="icon-box">ğŸ”¬</div>
            <div><h3>Ø§Ù„Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø°ÙƒÙŠ</h3><p>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø´Ø¹Ø© ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø·Ø¨ÙŠØ§Ù‹</p></div>
        </div>

        <div class="nav-bar">
            <div class="nav-item active">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            <div class="nav-item" onclick="alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹...')">ğŸ”<br>Ø¨Ø­Ø«</div>
            <div class="nav-item" onclick="document.getElementById('ai-input').focus()">ğŸ’¬<br>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</div>
            <div class="nav-item" onclick="alert('Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¨Ù„ÙˆÙƒØ´ÙŠÙ†...')">ğŸ“‹<br>Ø³Ø¬Ù„Ø§Øª</div>
        </div>
    </div>

    <script>
        const Pi = window.Pi;

        async function init() {
            const isPi = navigator.userAgent.includes("PiBrowser");
            const loader = document.getElementById('loader');
            const appUi = document.getElementById('app-ui');
            const external = document.getElementById('external-msg');

            if (isPi) {
                try {
                    // ØªÙØ¹ÙŠÙ„ Sandbox Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ø§Ø¬Ø¹Ù„Ù‡Ø§ false Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ)
                    Pi.init({ version: "2.0", sandbox: true }); 
                    
                    const user = await Pi.authenticate(['username', 'payments'], onIncompletePaymentFound);
                    document.getElementById('user-display').innerText = "Ø±Ø§Ø¦Ø¯: " + user.user.username;
                    
                    loader.style.display = 'none';
                    appUi.style.display = 'block';
                } catch (e) {
                    console.error(e);
                    loader.style.display = 'none';
                    appUi.style.display = 'block';
                }
            } else {
                loader.style.display = 'none';
                external.style.display = 'block';
            }
        }

        async function askStellar() {
            const input = document.getElementById('ai-input').value;
            if(!input) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„Ùƒ Ø£ÙˆÙ„Ø§Ù‹");

            const amount = 3.14; 
            try {
                await Pi.createPayment({
                    amount: amount,
                    memo: "Ø§Ø³ØªØ´Ø§Ø±Ø© Stellar Ø§Ù„Ø°ÙƒÙŠØ© - BM ANIMALS",
                    metadata: { type: "AI_Consultation" }
                }, {
                    onReadyForServerApproval: (id) => { console.log("Approved:", id); },
                    onReadyForServerCompletion: (id, txid) => { 
                        document.getElementById('ai-response').innerHTML = "<span style='color:var(--primary-green)'>ØªÙ… Ø§Ù„Ø¯ÙØ¹!</span> Stellar ÙŠØ­Ù„Ù„ Ø§Ù„Ø¢Ù†: Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù†ØµÙŠØ­Ø©...";
                        setTimeout(() => {
                            document.getElementById('ai-response').innerText = "Ù†ØµÙŠØ­Ø© Stellar: Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆØµÙÙƒØŒ ÙŠÙØ¶Ù„ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØªÙˆÙÙŠØ± Ù…ÙŠØ§Ù‡ Ø¹Ø°Ø¨Ø©. Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ø­Ø§Ù„Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø£Ù‚Ø±Ø¨ Ø¹ÙŠØ§Ø¯Ø© Ø¹Ø¨Ø± BM Tracker.";
                        }, 3000);
                    },
                    onCancel: (id) => { alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹"); },
                    onError: (e) => { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©"); }
                });
            } catch (err) { 
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù† Ø¯Ø§Ø®Ù„ Ù…ØªØµÙØ­ Ø¨Ø§ÙŠ"); 
            }
        }

        function onIncompletePaymentFound(payment) { /* Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù‚Ø© */ }

        window.onload = init;
    </script>
</body>
</html>
